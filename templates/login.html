{% extends "globals.html" %}
    {% block title %}Meme Lab{% endblock %}
{% block head %}
    <script src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js'></script>
{% endblock %}
{% block content %}
    <h1>Welcome to Meme Lab!</h1>
    <form id='login-data'>
        <p><h3>Enter login credentials:</h3></p>
        <p><input id='user-name' type='text' name='user-name' required autofocus placeholder='Username'/></p>
        <p><input id='password' type='text' name='password' required placeholder='Password'/></p>
        <p><input type='submit' value='Log in'/></p>
    </form>
    <script>
        document.getElementById('login-data').addEventListener('submit', function (event) {
            event.preventDefault();

            // get form data
            const formData = new FormData(document.getElementById('login-data'));

            // send POST request to Flask backend
            axios.post('/validate', formData)
                .then(function (response) {
                    console.log(response.success);
                    if (response.data.success === true) {
                        window.location.href = 'http://localhost:5000/';
                        location.reload()
                    } else {
                        alert('Login failed')
                    }
                })
                .catch(function (error) {});
        });
    </script>
{% endblock %}
{% block boilerplate %}
{% endblock %}